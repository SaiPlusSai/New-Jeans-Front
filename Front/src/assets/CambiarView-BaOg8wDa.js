import{_ as C,r as s,c as p,a,w as g,b as h,d as _,v as b,t as c,n as x,o as m,e as k}from"./index-acLvR5RI.js";const w={class:"login-container"},N={class:"login-card"},V={class:"login-input"},j=["type"],B={class:"material-icons"},S={class:"login-input"},$=["type"],z={class:"material-icons"},A=["disabled"],D={__name:"CambiarContrasenia",setup(f){const n=s(""),i=s(""),l=s(!1),r=s(!1),o=s(""),v=s(!1),u=s(!1),y=async()=>{u.value=!0,o.value="",v.value=!1;try{const d=localStorage.getItem("token"),e=await fetch("https://normativa.miga.org.bo/api/usuarios/cambiar-contrasenia",{method:"PATCH",headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"},body:JSON.stringify({actual:n.value,nueva:i.value})}),t=await e.json();e.ok?(o.value=t.mensaje||"Contraseña actualizada correctamente.",v.value=!0,n.value="",i.value=""):o.value=t.mensaje||"Ocurrió un error"}catch{o.value="Error de red o del servidor"}finally{u.value=!1}};return(d,e)=>(m(),p("div",w,[a("div",N,[e[4]||(e[4]=a("h2",{class:"login-title"},"Cambiar Contraseña",-1)),a("form",{onSubmit:g(y,["prevent"])},[a("div",V,[_(a("input",{type:l.value?"text":"password","onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),placeholder:"Contraseña actual",required:""},null,8,j),[[b,n.value]]),a("button",{type:"button",class:"ver-btn",onClick:e[1]||(e[1]=t=>l.value=!l.value)},[a("span",B,c(l.value?"visibility_off":"visibility"),1)])]),a("div",S,[_(a("input",{type:r.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=t=>i.value=t),placeholder:"Nueva contraseña",required:""},null,8,$),[[b,i.value]]),a("button",{type:"button",class:"ver-btn",onClick:e[3]||(e[3]=t=>r.value=!r.value)},[a("span",z,c(r.value?"visibility_off":"visibility"),1)])]),a("button",{class:"login-btn",type:"submit",disabled:u.value},c(u.value?"Cambiando...":"Cambiar Contraseña"),9,A),o.value?(m(),p("p",{key:0,class:x(["error-text",v.value?"exito-text":""])},c(o.value),3)):h("",!0)],32)])]))}},q=C(D,[["__scopeId","data-v-e13d809d"]]),I={__name:"CambiarView",setup(f){return(n,i)=>(m(),p("main",null,[k(q)]))}};export{I as default};
